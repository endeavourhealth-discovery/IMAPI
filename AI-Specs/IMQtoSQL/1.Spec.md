# Specification - IMQ to SQL converter

## IMQ - The information model query language
The IMQ is a query language, in JSON form, for the querying of a logical health data model.
The specification can be found in `QOFtoIMQ/3.IMQ-Specification.md` file, and examples in
column 2 of the table at `QOFtoIMQ/example-queries.tsv`.

## SQL - Structured Query Language
The SQL is a query language used by relational databases. 
It allows you to access and manipulate data stored in tables within those databases.
The converter should make use of a configurable map, with an initial target of the Discovery
Compass database, whos schema is defined here https://wiki.voror.co.uk/index.php?title=Compass_2.3.0_Schema_Documentation

## Converter
The converter will take an IMQ as input and output a SQL statement that can be executed against the Compass database. 
This will allow us to create queries from our logical models without having to write any SQL code ourselves. 

# Phases
Rebuild the project after each phase to ensure that it compiles correctly before moving on to the next phase. Any code
that is generated should be placed in the appropriate package/directory in the existing `src` folder.

## Phase 1 
Using the Compass schema documentation, generate a specification document. Save as `2.Compass.md`

## Phase 2
Using the specification document created in Phase 1, and the IMQ specification document,
generate a plan for how to convert an IMQ into a SQL statement. The plan should
include the use of a configurable mapping file. Save as `3.Plan.md`. Do not generate code.

## Phase 3
Implement the converter using the plan generated in phase 2. Save as `Converter.java`. Produce a single documentation
file covering this phase and save as `4b.Phase3Summary.md`.

## Phase 4
Generate a test application that reads in the query definitions from the second column of the table in 
`QOFtoIMQ/example-queries.tsv`, converts them to SQL statements, executes them against the Compass database,
(connection string is `mysql://root:password@localhost:3306/compass`), and checks that they return the expected results. 
Save as `Test.java`. Produce a single documentation file covering this phase and save as `5b.Phase4Summary.md`.