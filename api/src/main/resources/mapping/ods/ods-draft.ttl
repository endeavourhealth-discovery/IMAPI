@prefix rr: <http://www.w3.org/ns/r2rml#>.
@prefix rml: <http://semweb.mmlab.be/ns/rml#>.
@prefix ql: <http://semweb.mmlab.be/ns/ql#>.
@prefix xsd: <http://www.w3.org/2001/XMLSchema#>.
@prefix im: <http://endhealth.info/im#>.
@base <http://example.com/ns#>.

<#ODS> a rr:TriplesMap;
  rml:logicalSource [
    rml:source "Organisation_Details.csv" ;
    rml:referenceFormulation ql:CSV
  ];

  rr:subjectMap [
    rr:template "http://org.endhealth.info/im#{OrganisationId}";
    rr:class im:Organisation
  ];

  rr:predicateObjectMap [
    rr:predicate rdfs:label;
    rr:objectMap [
      rml:reference "Name"
    ]
  ];
  
  rr:predicateObjectMap [
    rr:predicate im:hasAddress;
    rr:objectMap [
      rr:parentTriplesMap <#Address>;
    ]
  ].


<#Address> a rr:TriplesMap;
  rml:logicalSource [
    rml:source "Organisation_Details.csv" ;
    rml:referenceFormulation ql:CSV;
  ];

  rr:subjectMap [
    rr:template "http://org.endhealth.info/im#{LocationId}";
    rr:class im:BlankNode
  ];

  rr:predicateObjectMap [
    rr:predicate im:addressLine1;
    rr:objectMap [
      rml:reference "AddrLn1"
    ]
  ];

  rr:predicateObjectMap [
    rr:predicate im:addressLine2;
    rr:objectMap [
      rml:reference "AddrLn2"
    ]
  ];

  rr:predicateObjectMap [
    rr:predicate im:addressLine3;
    rr:objectMap [
      rml:reference "AddrLn3"
    ]
  ];

  rr:predicateObjectMap [
    rr:predicate im:town;
    rr:objectMap [
      rml:reference "Town"
    ]
  ];

  rr:predicateObjectMap [
    rr:predicate im:county;
    rr:objectMap [
      rml:reference "County"
    ]
  ];

  rr:predicateObjectMap [
    rr:predicate im:postcode;
    rr:objectMap [
      rml:reference "PostCode"
    ]
  ];
  
  rr:predicateObjectMap [
    rr:predicate im:country;
    rr:objectMap [
      rml:reference "Country"
    ]
  ];
  
  rr:predicateObjectMap [
    rr:predicate im:uprn;
    rr:objectMap [
      rml:reference "UPRN"
    ]
  ].